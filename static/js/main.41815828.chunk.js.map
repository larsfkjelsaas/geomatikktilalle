{"version":3,"sources":["components/AppLayout.js","reducers/reducerUtilities.js","components/analysis/buffer.js","components/analysis/intersection.js","reducers/geometryCaseReducers.js","reducers/geometryReducer.js","reducers/geometryAnalysis.js","reducers/fileReducer.js","reducers/reducer.js","store/store.js","action-creators/actionCreator.js","components/menu/FileUpload.js","components/menu/NewFileMenu.js","components/menu/DataLayerPanel.js","components/menu/DatasetMenu.js","components/menu/BufferDialog.js","components/menu/AnalysisMenu.js","components/menu/AlphaPicker.js","components/menu/SliderColorPicker.js","components/menu/ColorPicker.js","components/menu/ColorMenu.js","components/menu/Sidebar.js","components/menu/Navbar.js","components/Map.js","App.js","index.js"],"names":["styled","div","findUniqueName","state","geometry","name","affix","isNameUnique","layers","undefined","find","layer","originalName","nameIsUnique","i","addLayer","analysisType","displayName","color","activeColor","triggeredAnalyses","createBuffer","geom","value","units","buffered","buffer","createIntersect","geom1","geom2","intersects","type","features","console","log","forEach","intersectGeom","intersect","geometryReducer","initialState","handlers","action","hasOwnProperty","createReducer","selectedAnalysis","expandedLayer","selectedLayers","layersToDelete","layerToMove","ANALYSIS_CHOSEN","payload","ANALYSIS_TRIGGERED","toLowerCase","selectedLayerName","selectedLayer","element","index","indexOf","bufferGeom","resolveBufferTrigger","length","alert","selectedLayer1","index1","selectedLayer2","index2","substring","resolveIntersectionTrigger","resolveDissolveTrigger","GEOMETRY_CREATE_TRIGGERED","GEOMETRY_DELETE_STARTED","layerToDelete","GEOMETRY_DELETE_FINALIZED","filter","LAYER_EXPANDED","layerIndex","LAYER_SELECTED","layerName","newSelectedLayers","Array","from","splice","DATA_LIST_REARRANGED","destination","source","newLayers","array","sourceIndex","destinationIndex","newArray","movedObject","moveItemInArray","LAYERS_REARRANGED_DONE","COLOR_CHANGE","newColor","itemList","itemNames","updateItemCallback","callBackArgs","updatedItems","map","item","updateItemByNameInLayers","args","result","lastValues","rootReducer","combineReducers","file","store","createStore","applyMiddleware","logger","analysisChoosen","bindActionCreators","add","amount","subtract","dispatch","analysisName","analysisTriggered","analysis","geometryCreateNew","geometryStartDeletion","geomatryFinalizeDeletion","expandLayer","selectLayer","selectColor","hex","dataLayerDragEnd","fileUploaded","files","JSON","parse","actions","connect","accept","useDropzone","onDrop","reader","FileReader","onloadend","readAsText","getRootProps","getInputProps","isDragActive","className","useStyles","makeStyles","theme","root","width","details","display","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","secondaryHeading","palette","text","secondary","NewFileMenu","classes","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","id","Typography","ExpansionPanelDetails","flexBasis","flexShrink","DataLayerPanel","draggableId","provided","draggableProps","dragHandleProps","innerRef","expanded","onChange","aria-label","FormControlLabel","onClick","event","target","stopPropagation","onFocus","control","Checkbox","label","CardActions","Button","size","appState","onDragEnd","droppableId","List","ref","droppableProps","key","placeholder","form","margin","spacing","SimpleDialog","props","onClose","selectedValue","open","React","useState","inputValue","setInputValue","Dialog","aria-labelledby","DialogTitle","noValidate","autoComplete","TextField","variant","BufferDialog","setOpen","ListItem","button","ListItemIcon","ListItemText","primary","dense","component","alphaDiv","position","marginTop","alpha","CustomPicker","onChangeComplete","AlphaPicker","padding","backgroundColor","ColorPicker","Paper","ColorMenu","styledSidebar","schools","currentAnalysis","StyledText","h1","styledNavbar","mapboxgl","accessToken","Map","lng","location","lat","zoom","activeLayers","this","_map","container","mapContainer","style","center","on","getCenter","setState","toFixed","getZoom","prevProps","newProps","prevLayers","addPointLayer","addPolygonLayer","setColorOfLayer","removeMapLayer","updateLayerOrder","newLayer","data","paint","getSource","removeLayer","removeSource","delete_finalize","colorVariable","setPaintProperty","layerBeforeId","layerToUpdateId","moveLayer","el","Component","StyledMap","App","AppLayout","locations","oslo","render","document","getElementById"],"mappings":"si8LAEeA,UAAOC,IAAtB,K,yCCsDO,SAASC,EAAeC,EAAOC,GAA8C,IAApCC,EAAmC,uDAA5B,eAAgBC,EAAY,uDAAJ,GAU7E,SAASC,EAAaF,EAAMG,GAC1B,YAAkDC,IAA9CD,EAAOE,MAAK,SAAAC,GAAK,OAAIA,EAAMN,OAASA,KATtCD,EAASC,MAAiB,iBAATA,IACnBA,EAAOD,EAASC,MAgBlB,IAHA,IAAIO,EATJP,GAAcC,EAUVO,EAAeN,EAAaF,EAAMF,EAAMK,QACxCM,EAAI,GACAD,GACNR,EAAOO,EAAe,IAAME,EAC5BA,GAAK,EAELD,EAAeN,EAAaF,EAAMF,EAAMK,QAG1C,OAAOH,EAGF,SAASU,EAASZ,EAAOQ,GAA8B,IAAvBK,EAAsB,uDAAP,MAYpD,OAVAL,EAAMM,YAAcN,EAAMN,KAG1BM,EAAMO,MAAQf,EAAMgB,YAEpBhB,EAAK,eACAA,EADA,CAEHK,OAAO,CAAEG,GAAH,mBAAaR,EAAMK,SACzBY,kBAAkB,GAAD,mBAAMjB,EAAMiB,mBAAZ,CAA+BJ,M,aCxFrCK,EALM,SAACC,EAAMC,GAA6B,IAAtBC,EAAqB,uDAAb,SACrCC,EAAWC,YAAOJ,EAAMC,EAAO,CAAEC,MAAOA,IAC5C,OAAOC,G,kBCeME,EAjBS,SAACC,EAAOC,GAC9B,IAAIC,EAAa,CACfC,KAAM,oBACNC,SAAU,IAWZ,OATAC,QAAQC,IAAIN,GACZA,EAAMxB,SAAS4B,SAASG,SAAQ,SAAAP,GAC9BC,EAAMzB,SAAS4B,SAASG,SAAQ,SAAAN,GAC9B,IAAIO,EAAgBC,IAAUT,EAAOC,GACf,OAAlBO,IACFN,EAAWE,SAAX,sBAA0BF,EAAWE,UAArC,CAA+CI,WAI9CN,GCJF,ICaMQ,EJqBN,SAAuBC,EAAcC,GAC1C,OAAO,WAAgD,IAA/BrC,EAA8B,uDAAtBoC,EAAcE,EAAQ,uCACpD,OAAID,EAASE,eAAeD,EAAOV,MAC1BS,EAASC,EAAOV,MAAM5B,EAAOsC,GAE7BtC,GI1BkBwC,CAXK,CAClCC,iBAAkB,SAClBxB,kBAAmB,GACnByB,eAAgB,EAChBC,eAAgB,GAChBtC,OAAQ,GACRuC,eAAgB,GAChBC,aAAc,EACd7B,YAAa,WAGoD,CACjE8B,gBDd4B,SAAC9C,EAAOsC,GACpC,OAAO,eACFtC,EADL,CAEEyC,iBAAkBH,EAAOS,QACzB9B,kBAAkB,GAAD,mBAAMjB,EAAMiB,mBAAZ,CAA+BqB,EAAOS,aCWzDC,mBDP+B,SAAChD,EAAOsC,GACvC,IAAIA,EAAOS,QAAQnB,KAajB,OAAO5B,EAZP,OAAQsC,EAAOS,QAAQnB,KAAKqB,eAC1B,IAAK,SACH,OEpBD,SAA8BjD,EAAOsC,GAC1C,IAAIlB,EAAQkB,EAAOS,QAAQ3B,MAkB3B,OAjBApB,EAAM2C,eAAeX,SAAQ,SAAAkB,GAC3B,IAAIC,EAAgBnD,EAAMK,OAAOE,MAC/B,SAAA6C,GAAO,OAAIA,EAAQlD,OAASgD,KAE1BG,EAAQrD,EAAMK,OAAOiD,QAAQH,GAC7BhC,EAAOnB,EAAMK,OAAOgD,GAAOpD,SAC3BsD,EAAarC,EAAaC,EAAMC,GAChClB,EAAOF,EAAMK,OAAOgD,GAAOnD,KAC/BA,EAAOH,EAAeC,EAAOmB,EAAMjB,EAAM,WAMzCF,EAAQY,EAASZ,EALL,CACVC,SAAUsD,EACVrD,KAAMA,EACN0B,KAAM,WAEuB,aAG1B5B,EFCMwD,CAAqBxD,EAAOsC,GACrC,IAAK,eACH,OEAD,SAAoCtC,EAAOsC,GAChD,GAAoC,IAAhCtC,EAAM2C,eAAec,OAEvB,OADAC,MAAM,2CACC1D,EAGT,IAAI2D,EAAiB3D,EAAMK,OAAOE,MAChC,SAAA6C,GAAO,OAAIA,EAAQlD,OAASF,EAAM2C,eAAe,MAE/CiB,EAAS5D,EAAMK,OAAOiD,QAAQK,GAC9BlC,EAAQzB,EAAMK,OAAOuD,GAErBC,EAAiB7D,EAAMK,OAAOE,MAChC,SAAA6C,GAAO,OAAIA,EAAQlD,OAASF,EAAM2C,eAAe,MAE/CmB,EAAS9D,EAAMK,OAAOiD,QAAQO,GAC9BnC,EAAQ1B,EAAMK,OAAOyD,GAEzB,GAAqB,YAAfrC,EAAMG,MAAqC,YAAfF,EAAME,KAEtC,OADA8B,MAAM,yCACC1D,EAGT,IAAIiC,EAAgBT,EAAgBC,EAAOC,GACvCxB,EACFF,EAAMK,OAAOuD,GAAQ1D,KAAK6D,UAAU,EAAG,GACvC,IACA/D,EAAMK,OAAOyD,GAAQ5D,KAAK6D,UAAU,EAAG,GAUzC,OATA7D,EAAOH,EAAeC,EAAOyB,EAAOvB,EAAM,cAO1CF,EAAQY,EAASZ,EANL,CACVC,SAAUgC,EACV/B,KAAMA,EACN0B,KAAM,WAGuB,aFnClBoC,CAA2BhE,GACpC,IAAK,WACH,OEsCD,SAAgCA,EAAOsC,GAE5C,OADAoB,MAAM,4BACC1D,EFxCMiE,CAAuBjE,GAChC,QAEE,OADA8B,QAAQC,IAAI,gCACL/B,ICHbkE,0BDUqC,SAAClE,EAAOsC,GAC7C,IAAIrC,EAAWqC,EAAOS,QAQtB,OAAOnC,EAASZ,EALJ,CACVC,SAAUA,EACVC,KAJSH,EAAeC,EAAOC,GAK/B2B,KAAM,WChBRuC,wBDqBmC,SAACnE,EAAOsC,GAC3C,IAAM8B,EAAgBpE,EAAMK,OAAOE,MACjC,SAAAC,GAAK,OAAIA,EAAMN,OAASoC,EAAOS,WAEjC,OAAO,eACF/C,EADL,CAEE4C,eAAe,GAAD,mBAAM5C,EAAM4C,gBAAZ,CAA4BwB,OC1B5CC,0BD8BqC,SAACrE,EAAOsC,GAC7C,OAAO,eACFtC,EADL,CAEEK,OAAQL,EAAMK,OAAOiE,QACnB,SAAA9D,GAAK,OAAIA,EAAMN,OAASF,EAAM4C,eAAe,GAAG1C,QAElD0C,eAAgB,MCnClB2B,eDuC2B,SAACvE,EAAOsC,GACnC,IAAIkC,EAAalC,EAAOS,QAKxB,OAHI/C,EAAM0C,gBAAkB8B,IAC1BA,GAAc,GAET,eACFxE,EADL,CAEE0C,cAAe8B,KC9CjBC,eDkD2B,SAACzE,EAAOsC,GACnC,IAAIoC,EAAYpC,EAAOS,QACnB4B,EAAoBC,MAAMC,KAAK7E,EAAM2C,gBACrCU,EAAQsB,EAAkBrB,QAAQoB,GAStC,OANIrB,GAAS,EACXsB,EAAkBG,OAAOzB,EAAO,GAEhCsB,EAAiB,sBAAOA,GAAP,CAA0BD,IAGtC,eACF1E,EADL,CAEE2C,eAAgBgC,KC/DlBI,qBDmE8B,SAAC/E,EAAOsC,GAAY,IAAD,EACjBA,EAAOS,QAA/BiC,EADyC,EACzCA,YAAaC,EAD4B,EAC5BA,OACfC,EHhED,SAAyBC,EAAOC,EAAaC,GAClD,IAAMC,EAAWV,MAAMC,KAAKM,GACtBI,EAAcJ,EAAMC,GAG1B,OAFAE,EAASR,OAAOM,EAAa,GAC7BE,EAASR,OAAOO,EAAkB,EAAGE,GAC9BD,EG2DWE,CAChBxF,EAAMK,OACN4E,EAAO5B,MACP2B,EAAY3B,OAIVX,EAAgB1C,EAAM0C,cAK1B,OAJIuC,EAAO5B,QAAUX,IACnBA,EAAgBsC,EAAY3B,OAGvB,eACFrD,EADL,CAEEK,OAAQ6E,EACRxC,cAAeA,EACfG,YAAamC,EAAY3B,SCpF3BoC,uBDwFkC,SAACzF,EAAOsC,GAC1C,OAAO,eACFtC,EADL,CAEE6C,aAAc,KC1FhB6C,aD8FyB,SAAC1F,EAAOsC,GACjC,IASIqD,EAAWrD,EAAOS,QAClBmC,EHvHC,SAAkCU,EAAUC,EAAWC,GAAsC,IAAD,uBAAdC,EAAc,iCAAdA,EAAc,kBACjG,IAAMC,EAAeJ,EAASK,KAAI,SAAAC,GAEhC,OADYL,EAAUvC,QAAQ4C,EAAKhG,MACvB,EAEHgG,EAIWJ,EAAmBI,EAAMH,MAK/C,OADAjE,QAAQC,IAAIiE,GACLA,EGyGSG,CACdnG,EAAMK,OACNL,EAAM2C,gBAZiB,SAACnC,EAAO4F,GAC/B,IAAIrF,EAAQqF,EAAK,GAKjB,OAJY,eACP5F,EADO,CAEVO,MAAOA,MAUT4E,GAEaf,MAAMC,KAAK7E,GAQ1B,OANQ,eACHA,EADG,CAENK,OAAQ6E,EACRlE,YAAa2E,OGtJXvD,EAAe,CACjBiE,OAAQ,EACRC,WAAY,ICMDC,EALKC,YAAgB,CAClCvG,SAAUkC,EACVsE,KDA0B,WAAmC,IAAlCzG,EAAiC,uDAAzBoC,EAAcE,EAAW,uCAO1D,OANQA,EAAOV,KAMR5B,K,kBEPI0G,EAFDC,YAAYJ,EAAa,GAAIK,YAAgBC,MCW9CC,GARcC,YACzB,CACEC,IALsB,SAAAC,GAAM,MAAK,CAAErF,KAAM,MAAOmB,QAASkE,IAMzDC,SALyB,SAAAD,GAAM,MAAK,CAAErF,KAAM,WAAYmB,QAASkE,KAOnEP,EAAMS,UAGuB,SAAAC,GAAY,MAAK,CAC9CxF,KAAM,kBACNmB,QAASqE,KAEEC,EAAoB,SAAAC,GAAQ,MAAK,CAC5C1F,KAAM,qBACNmB,QAASuE,IAWEC,GARkBR,YAC7B,CACED,kBACAO,qBAEFX,EAAMS,UAGyB,SAAAlH,GAAQ,MAAK,CAC5C2B,KAAM,4BACNmB,QAAS9C,KAEEuH,EAAwB,SAAAtH,GAAI,MAAK,CAC5C0B,KAAM,0BACNmB,QAAS7C,IAGEuH,EAA2B,iBAAO,CAC7C7F,KAAM,8BAGK8F,EAAc,SAAArE,GAAK,MAAK,CACnCzB,KAAM,iBACNmB,QAASM,IAGEsE,EAAc,SAAAzH,GAAI,MAAK,CAClC0B,KAAM,iBACNmB,QAAS7C,IAIE0H,EAAc,SAAAC,GAAG,MAAK,CACjCjG,KAAM,eACNmB,QAAS8E,IAGEC,EAAmB,SAAAzB,GAAM,MAAK,CACzCzE,KAAM,uBACNmB,QAASsD,IAgBE0B,GAbkBhB,YAC7B,CACEQ,oBACAC,wBACAC,2BACAC,cACAC,cACAC,cACAE,oBAEFpB,EAAMS,UAGoB,SAAAa,GAAK,MAAK,CACpCpG,KAAM,4BACNmB,QAASkF,KAAKC,MAAMF,M,GAGKjB,YACzB,CACEgB,gBAEFrB,EAAMS,U,qECxCFgB,EAAU,CACdJ,aAAcA,GAGDK,cAAQ,KAAMD,EAAdC,EA5CI,SAAC,GAA8B,IAA5BL,EAA2B,EAA3BA,aAAcM,EAAa,EAAbA,OAAa,EAcOC,YAAY,CAChEC,OAda,SAAAP,GACb,GAAIA,GAASA,EAAM,GAAI,CACrB,IAAIQ,EAAS,IAAIC,WACbhC,EAAOuB,EAAM,GAEjBQ,EAAOE,UAAY,WACjBX,EAAaS,EAAOnC,SAEtBmC,EAAOG,WAAWlC,KAOpB4B,WAFMO,EAduC,EAcvCA,aAAcC,EAdyB,EAczBA,cAAeC,EAdU,EAcVA,aAUrC,OACE,wBAASF,IACP,yCAAOG,UAAU,kBAAqBF,MACtC,yBAAKE,UAAU,eACZD,EACC,uBAAGC,UAAU,oBAAb,kCAEA,uBAAGA,UAAU,oBAAb,gEC1BJC,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETC,QAAS,CACPC,QAAS,SAEXC,QAAS,CACPC,SAAUN,EAAMO,WAAWC,QAAQ,IACnCC,WAAYT,EAAMO,WAAWG,mBAE/BC,iBAAkB,CAChBL,SAAUN,EAAMO,WAAWC,QAAQ,IACnC3I,MAAOmI,EAAMY,QAAQC,KAAKC,eAyBfC,GArBK,WAClB,IAAMC,EAAUlB,IAEhB,OACE,yBAAKD,UAAWmB,EAAQf,MACtB,kBAACgB,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,WAAY,kBAAC,IAAD,MACZC,gBAAc,kBACdC,GAAG,kBAEH,kBAACC,EAAA,EAAD,CAAYzB,UAAWmB,EAAQX,SAA/B,aAEF,kBAACkB,EAAA,EAAD,CAAuB1B,UAAWmB,EAAQb,SACxC,kBAAC,EAAD,CAAYhB,OAAQ,yB,iDC5BxBW,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETC,QAAS,CACPC,QAAS,SAEXC,QAAS,CACPC,SAAUN,EAAMO,WAAWC,QAAQ,IACnCC,WAAYT,EAAMO,WAAWG,kBAC7Bc,UAAW,SACXC,WAAY,GAEdd,iBAAkB,CAChBL,SAAUN,EAAMO,WAAWC,QAAQ,IACnC3I,MAAOmI,EAAMY,QAAQC,KAAKC,eA8DfY,GA1DQ,SAAC,GAOjB,IANL1K,EAMI,EANJA,KACAmD,EAKI,EALJA,MACAmE,EAII,EAJJA,sBACAE,EAGI,EAHJA,YACAC,EAEI,EAFJA,YACAjF,EACI,EADJA,cAEMwH,EAAUlB,KAChB,OACE,kBAAC,KAAD,CAAW6B,YAAa3K,EAAMmD,MAAOA,IAClC,SAAAyH,GAAQ,OACP,kBAACX,EAAA,EAAD,iBACMW,EAASC,eACTD,EAASE,gBAFf,CAGEC,SAAUH,EAASG,SACnBC,SAAU7H,IAAUX,EACpByI,SAAU,kBAAMzD,EAAYrE,MAE5B,kBAAC+G,EAAA,EAAD,CACEC,WAAY,kBAAC,IAAD,MACZe,aAAW,SACXd,gBAAc,8BACdC,GAAG,8BAEH,kBAACc,GAAA,EAAD,CACED,aAAW,SACXE,QAAS,SAAAC,GAEmB,aAAtBA,EAAMC,OAAO5J,MACf+F,EAAYzH,GAGdqL,EAAME,mBAERC,QAAS,SAAAH,GACPA,EAAME,mBAERE,QAAS,kBAACC,GAAA,EAAD,MACTC,MAAO3L,KAIX,kBAACuK,EAAA,EAAD,KACE,kBAACqB,GAAA,EAAD,CAAa/C,UAAWmB,EAAQ/B,SAC9B,kBAAC4D,EAAA,EAAD,CAAQC,KAAK,SAAb,WACA,kBAACD,EAAA,EAAD,CAAQC,KAAK,SAAb,QACA,kBAACD,EAAA,EAAD,CAAQC,KAAK,QAAQV,QAAS,kBAAM9D,EAAsBtH,KAA1D,iBC3DR8I,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETC,QAAS,CACPC,QAAS,SAEXC,QAAS,CACPC,SAAUN,EAAMO,WAAWC,QAAQ,IACnCC,WAAYT,EAAMO,WAAWG,kBAC7Bc,UAAW,SACXC,WAAY,GAEdd,iBAAkB,CAChBL,SAAUN,EAAMO,WAAWC,QAAQ,IACnC3I,MAAOmI,EAAMY,QAAQC,KAAKC,eAiFxB7B,GAAU,CACdX,sBAAuBA,EACvBE,YAAaA,EACbC,YAAaA,EACbG,iBAAkBA,GAGLM,gBAZA,SAAA6D,GAAQ,MAAK,CAC1BvJ,cAAeuJ,EAAShM,SAASyC,cACjCrC,OAAQ4L,EAAShM,SAASI,UAUG8H,GAAhBC,EApFK,SAAC,GAOd,IANL1F,EAMI,EANJA,cACArC,EAKI,EALJA,OACAmH,EAII,EAJJA,sBACAE,EAGI,EAHJA,YACAC,EAEI,EAFJA,YACAG,EACI,EADJA,iBAEMoC,EAAUlB,KAmBhB,OACE,yBAAKD,UAAWmB,EAAQf,MACtB,kBAACgB,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,WAAY,kBAAC,IAAD,MACZC,gBAAc,kBACdC,GAAG,kBAEH,kBAACC,EAAA,EAAD,CAAYzB,UAAWmB,EAAQX,SAA/B,aAEF,kBAAC,KAAD,CAAiB2C,UA3BL,SAAA7F,GAAW,IACnBrB,EAAwBqB,EAAxBrB,YAAaC,EAAWoB,EAAXpB,OAEhBD,IAKHA,EAAYmH,cAAgBlH,EAAOkH,aACnCnH,EAAY3B,QAAU4B,EAAO5B,OAK/ByE,EAAiBzB,MAeX,kBAACoE,EAAA,EAAD,CAAuB1B,UAAWmB,EAAQb,SACxC,kBAAC+C,GAAA,EAAD,KACE,kBAAC,KAAD,CAAWD,YAAY,gBACpB,SAAArB,GAAQ,OACP,uCACEuB,IAAKvB,EAASG,UACVH,EAASwB,eAFf,CAGExB,SAAUA,IAETzK,EAAO4F,KAAI,SAACzF,EAAO6C,GAAR,OACV,kBAAC,GAAD,CACE0F,UAAU,QACVwD,IAAK/L,EAAMN,KACXA,KAAMM,EAAMN,KACZmD,MAAOA,EACPmE,sBAAuBA,EACvBE,YAAaA,EACbC,YAAaA,EACbjF,cAAeA,OAGlBoI,EAAS0B,wB,qICvFxBxD,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCuD,KAAM,CACJ,QAAS,CACPC,OAAQxD,EAAMyD,QAAQ,GACtBvD,MAAO,UAKb,SAASwD,GAAaC,GACpB,IAAM3C,EAAUlB,KACR8D,EAAiCD,EAAjCC,QAASC,EAAwBF,EAAxBE,cAAeC,EAASH,EAATG,KAFL,EAYOC,IAAMC,SAAS,IAZtB,oBAYtBC,EAZsB,KAYVC,EAZU,KAc3B,OACE,kBAACC,GAAA,EAAD,CACEP,QARgB,WAClBA,EAAQC,IAQNO,kBAAgB,sBAChBN,KAAMA,GAEN,kBAACO,GAAA,EAAD,CAAahD,GAAG,uBAAhB,sBACA,0BAAMxB,UAAWmB,EAAQuC,KAAMe,YAAU,EAACC,aAAa,OACrD,kBAACC,GAAA,EAAD,CACEnD,GAAG,iBACHsB,MAAM,SACN8B,QAAQ,WACR/L,KAAK,SACLuJ,SAAU,SAAAI,GAAK,OAAI6B,EAAc7B,EAAMC,OAAOpK,WAGlD,kBAAC2K,EAAA,EAAD,CAAQT,QAAS,WAzBnBwB,EAyBsCK,KAApC,SAUN,IAgCeS,GAhCM,SAAC,GAA2B,IAAzBvG,EAAwB,EAAxBA,kBAAwB,EACtB4F,IAAMC,UAAS,GADO,oBACvCF,EADuC,KACjCa,EADiC,KAY9C,OACE,6BACE,kBAACC,GAAA,EAAD,CAAUC,QAAM,EAACzC,QAXG,WACtBuC,GAAQ,KAWJ,kBAACG,GAAA,EAAD,KACE,kBAAC,KAAD,OAEF,kBAACC,GAAA,EAAD,CACEC,QAAQ,SACRlE,UAAU,2CAGd,kBAAC4C,GAAD,CACEI,KAAMA,EACNF,QAlBc,SAAA1L,GAClByM,GAAQ,GACRxG,EAAkB,CAAEzF,KAAM,SAAUR,MAAOA,SCpDzC4H,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETC,QAAS,CACPC,QAAS,SAEXC,QAAS,CACPC,SAAUN,EAAMO,WAAWC,QAAQ,IACnCC,WAAYT,EAAMO,WAAWG,mBAE/BC,iBAAkB,CAChBL,SAAUN,EAAMO,WAAWC,QAAQ,IACnC3I,MAAOmI,EAAMY,QAAQC,KAAKC,eAmDxB7B,GAAU,CACdd,kBAAmBA,GAGNe,eAAQ,KAAMD,GAAdC,EAnDM,SAAC,GAA2B,IAAzBf,EAAwB,EAAxBA,kBAChB6C,EAAUlB,KAEhB,OACE,yBAAKD,UAAWmB,EAAQf,MACtB,kBAACgB,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,WAAY,kBAAC,IAAD,MACZC,gBAAc,kBACdC,GAAG,kBAEH,kBAACC,EAAA,EAAD,CAAYzB,UAAWmB,EAAQX,SAA/B,aAEF,kBAACkB,EAAA,EAAD,CAAuB1B,UAAWmB,EAAQb,SACxC,kBAAC+C,GAAA,EAAD,CAAM+B,OAAO,EAAMC,UAAU,MAAMhD,aAAW,wBAC5C,kBAAC,GAAD,CAAc/D,kBAAmBA,IACjC,kBAACyG,GAAA,EAAD,CACEC,QAAM,EACNzC,QAAS,kBAAMjE,EAAkB,CAAEzF,KAAM,mBAEzC,kBAACoM,GAAA,EAAD,KACE,kBAAC,KAAD,OAEF,kBAACC,GAAA,EAAD,CACEC,QAAQ,eACRlE,UAAU,2CAGd,kBAAC8D,GAAA,EAAD,CAAUC,QAAM,GACd,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,OAEF,kBAACC,GAAA,EAAD,CACEC,QAAQ,WACRlE,UAAU,oD,6BCpEpBhB,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCmF,SAAU,CACRjF,MAAO,OACPsD,OAAQ,OACR4B,SAAU,WACVC,UAAW,QAEbC,MAAO,CACLF,SAAU,gBASCG,4BANO,SAAC,GAAkC,EAAhC1N,MAAgC,EAAzBoK,SAA0B,IAAb0B,EAAY,qCACjD3C,EAAUlB,KAEhB,OAAO,kBAAC,eAAD,iBAAiB6D,EAAjB,CAAwB9D,UAAWmB,EAAQmE,eCS9ClG,GAAU,CACdP,YAAaA,GAGAQ,gBAVA,SAAA6D,GACb,MAAO,CACLjL,YAAaiL,EAAShM,SAASe,eAQJmH,GAAhBC,EAzBW,SAAC,GAAkC,IAAhCpH,EAA+B,EAA/BA,YAAa4G,EAAkB,EAAlBA,YACxC,OACE,6BACE,kBAAC,gBAAD,CACE7G,MAAOC,EACP0N,iBAAkB,SAAA3N,GAAK,OAAI6G,EAAY7G,EAAM8G,QAE/C,kBAAC8G,GAAD,CACE5N,MAAOC,EACPmK,SAAU,SAAApK,GAAK,OAAI6G,EAAY7G,EAAM8G,YCVvCmB,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJyF,QAAS1F,EAAMyD,QAAQ,EAAG,GAC1BvD,MAAO,MACPsD,OAAQ,OACRmC,gBAAiB,eAcNC,GAVK,WAClB,IAAM5E,EAAUlB,KAEhB,OACE,kBAAC+F,GAAA,EAAD,CAAOhG,UAAWmB,EAAQf,MACxB,kBAAC,GAAD,QCRAH,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,QAETC,QAAS,CACPC,QAAS,SAEXC,QAAS,CACPC,SAAUN,EAAMO,WAAWC,QAAQ,IACnCC,WAAYT,EAAMO,WAAWG,kBAC7Bc,UAAW,SACXC,WAAY,GAEdd,iBAAkB,CAChBL,SAAUN,EAAMO,WAAWC,QAAQ,IACnC3I,MAAOmI,EAAMY,QAAQC,KAAKC,eAyBfgF,GArBG,WAChB,IAAM9E,EAAUlB,KAEhB,OACE,yBAAKD,UAAWmB,EAAQf,MACtB,kBAACgB,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,WAAY,kBAAC,IAAD,MACZC,gBAAc,kBACdC,GAAG,kBAEH,kBAACC,EAAA,EAAD,CAAYzB,UAAWmB,EAAQX,SAA/B,qBAEF,kBAACkB,EAAA,EAAD,CAAuB1B,UAAWmB,EAAQb,SACxC,kBAAC,GAAD,U,iMC7BV,IAqBM4F,GAAgBpP,aArBN,SAAC,GAKV,IAJLkJ,EAII,EAJJA,UACAjC,EAGI,EAHJA,gBACAS,EAEI,EAFJA,kBACAF,EACI,EADJA,kBAEA,OACE,yBAAK0B,UAAWA,GACd,kBAACgD,EAAA,EAAD,CAAQT,QAAS,kBAAMxE,EAAgB,YAAvC,iBACA,kBAACiF,EAAA,EAAD,CAAQT,QAAS,kBAAM/D,EAAkB2H,MAAzC,mBAGA,kBAACnD,EAAA,EAAD,CAAQT,QAAS,kBAAMjE,EAAkB,OAAzC,WACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,SAKgBxH,CAAH,MAabsI,GAAU,CACdrB,gBAAiBA,EACjBS,kBAAmBA,EACnBF,kBAAmBA,GAGNe,gBAXA,SAAA6D,GACb,MAAO,CACLkD,gBAAiBlD,EAASkD,mBASChH,GAAhBC,CAAyB6G,I,qSCpDxC,IAAMG,GAAavP,IAAOwP,GAAV,MAoBDC,GARMzP,aARN,SAAC,GAAmB,IAAjBkJ,EAAgB,EAAhBA,UAChB,OACE,yBAAKA,UAAWA,GACd,kBAACqG,GAAD,uBAKevP,CAAH,M,wLCTlB0P,KAASC,YACP,4F,IAEIC,G,YACJ,WAAY5C,GAAQ,IAAD,8BACjB,4CAAMA,KACD7M,MAAQ,CACX0P,IAAK7C,EAAM8C,SAASD,IACpBE,IAAK/C,EAAM8C,SAASC,IACpBC,KAAMhD,EAAM8C,SAASE,KACrBC,aAAc,IANC,E,iFASE,IAAD,SACSC,KAAK/P,MAAxB0P,EADU,EACVA,IAAKE,EADK,EACLA,IAAKC,EADA,EACAA,KAClBE,KAAKC,KAAO,IAAIT,KAASE,IAAI,CAC3BQ,UAAWF,KAAKG,aAChBC,MAAO,oCACPC,OAAQ,CAACV,EAAKE,GACdC,SAEF,IAAI5J,EAAM8J,KAAKC,KACf/J,EAAIoK,GAAG,QAAQ,WAAO,IAAD,EACEpK,EAAIqK,YAAjBZ,EADW,EACXA,IAAKE,EADM,EACNA,IACb,EAAKW,SAAS,CACZb,IAAKA,EAAIc,QAAQ,GACjBZ,IAAKA,EAAIY,QAAQ,GACjBX,KAAM5J,EAAIwK,UAAUD,QAAQ,U,yCAKfE,GAAY,IAAD,OACxBC,EAAWZ,KAAKlD,MAChB3H,EAAYyL,EAAStQ,OACrBuQ,EAAaF,EAAUrQ,OAG3B,GAAI6E,EAAUzB,OAASmN,EAAWnN,OAAQ,CACxC,IAAIjD,EAAQ0E,EAAU,GACtB,OAAQ1E,EAAMoB,MACZ,IAAK,QACHmO,KAAKc,cAAcrQ,GACnB,MACF,IAAK,UACHuP,KAAKe,gBAAgBtQ,GACrB,MACF,QACEsB,QAAQC,IAAI,4BAMb4O,EAAS3P,cAAgB0P,EAAU1P,aACpC2P,EAAShO,eAAeX,SAAQ,SAAAkB,GAC9B,IAAIC,EAAgBwN,EAAStQ,OAAOE,MAAK,SAAAC,GAAK,OAAIA,EAAMN,OAASgD,KACjE,EAAK6N,gBAAgB5N,MAQvBwN,EAAS/N,eAAea,OAAS,GACnCkN,EAAS/N,eAAeZ,SAAQ,SAAAxB,GAAK,OAAI,EAAKwQ,eAAexQ,MAG3DmQ,EAAS9N,aAAe,GAC1BkN,KAAKkB,iBAAiBN,EAAS9N,e,oCAIrBrC,GACZ,IAAI0Q,EAAWnB,KAAKC,KAAKpP,SAAS,CAChC2J,GAAI/J,EAAMN,KACV0B,KAAM,SACNqD,OAAQ,CACNrD,KAAM,UACNuP,KAAM3Q,EAAMP,UAEdmR,MAAO,CAAE,eAAgB5Q,EAAMO,SAGjCgP,KAAKQ,SAAS,CACZT,aAAa,GAAD,mBAAMC,KAAK/P,MAAM8P,cAAjB,CAA+BoB,Q,sCAI/B1Q,GACd,IAAI0Q,EAAWnB,KAAKC,KAAKpP,SAAS,CAChC2J,GAAI/J,EAAMN,KACV0B,KAAM,OACNqD,OAAQ,CACNrD,KAAM,UACNuP,KAAM3Q,EAAMP,UAMdmR,MAAO,CAAE,aAAc5Q,EAAMO,SAG/BgP,KAAKQ,SAAS,CACZT,aAAa,GAAD,mBAAMC,KAAK/P,MAAM8P,cAAjB,CAA+BoB,Q,qCAIhC9M,GAER2L,KAAKC,KAAKqB,UAAUjN,EAAclE,QAIvC6P,KAAKC,KAAKsB,YAAYlN,EAAclE,MACpC6P,KAAKC,KAAKuB,aAAanN,EAAclE,MACrC6P,KAAKlD,MAAM2E,qB,sCAGGhR,GACd,IAAIiR,EAAgB,GACD,UAAfjR,EAAMoB,KACR6P,EAAgB,eACQ,YAAfjR,EAAMoB,OACf6P,EAAgB,cAGlB1B,KAAKC,KAAK0B,iBAAiBlR,EAAMN,KAAMuR,EAAejR,EAAMO,S,uCAG7CsC,GACf,IAEIsO,EAFAtR,EAAS0P,KAAKlD,MAAMxM,OACpBuR,EAAkBvR,EAAOgD,GAAOnD,KAIlCyR,EADY,IAAVtO,EACc,KAIAhD,EAAOgD,EAAQ,GAAGnD,KAEpC6P,KAAKC,KAAK6B,UAAUD,EAAiBD,K,+BAG7B,IAAD,OACP,OACE,yBACE5I,UAAWgH,KAAKlD,MAAM9D,UACtBsD,IAAK,SAAAyF,GAAE,OAAK,EAAK5B,aAAe4B,S,GApJtBC,aA0JZC,GAAYnS,YAAO4P,GAAP5P,CAAH,MAiBTsI,GAAU,CACdqJ,gBAAiB/J,GAGJW,gBAdA,SAAA6D,GACb,MAAO,CACLtJ,eAAgBsJ,EAAShM,SAAS0C,eAClCtC,OAAQ4L,EAAShM,SAASI,OAC1BuC,eAAgBqJ,EAAShM,SAAS2C,eAClCC,YAAaoJ,EAAShM,SAAS4C,YAC/B7B,YAAaiL,EAAShM,SAASe,eAQJmH,GAAhBC,CAAyB4J,I,UClKzBC,G,iLAZX,OACE,yBAAKlJ,UAAU,OACb,kBAACmJ,EAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAKvC,SAAUwC,GAAUC,a,GAPjBL,aCFlBM,iBACE,kBAAC,IAAD,CAAU3L,MAAOA,GACf,kBAAC,GAAD,OAEF4L,SAASC,eAAe,W","file":"static/js/main.41815828.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport default styled.div`\r\n  display: grid;\r\n  height: 100vh;\r\n  grid-template-columns: 400px 250px 1fr;\r\n  grid-template-rows: 10% 1fr;\r\n`;\r\n","export function updateObject(oldObject, newValues) {\r\n  // Encapsulate the idea of passing a new object as the first parameter\r\n  // to Object.assign to ensure we correctly copy data instead of mutating\r\n  return Object.assign({}, oldObject, newValues);\r\n}\r\n\r\nexport function updateItemInLayersId(state, itemId, updateItemCallback) {\r\n  const updatedItems = state.layers.map(item => {\r\n    if (item.id !== itemId) {\r\n      // Since we only want to update one item, preserve all others as they are now\r\n      return item;\r\n    }\r\n\r\n    // Use the provided callback to create an updated item\r\n    const updatedItem = updateItemCallback(state, item);\r\n    return updatedItem;\r\n  });\r\n\r\n  return updatedItems;\r\n}\r\n\r\nexport function updateItemByNameInLayers(itemList, itemNames, updateItemCallback, ...callBackArgs) {\r\n  const updatedItems = itemList.map(item => {\r\n    let index = itemNames.indexOf(item.name);\r\n    if (index < 0) {\r\n      // Since we only want to update items in the list, preserve all others as they are now\r\n      return item;\r\n    }\r\n\r\n    // Use the provided callback to create an updated item\r\n    const updatedItem = updateItemCallback(item, callBackArgs);\r\n\r\n    return updatedItem;\r\n  });\r\n  console.log(updatedItems);\r\n  return updatedItems;\r\n}\r\n\r\nexport function moveItemInArray(array, sourceIndex, destinationIndex) {\r\n  const newArray = Array.from(array);\r\n  const movedObject = array[sourceIndex];\r\n  newArray.splice(sourceIndex, 1);\r\n  newArray.splice(destinationIndex, 0, movedObject);\r\n  return newArray;\r\n}\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n\r\nexport function findUniqueName(state, geometry, name = \"new_geometry\", affix = \"\") {\r\n  //If no name is given and the dataset includes a name, use it\r\n  if (geometry.name && name === \"new_geometry\") {\r\n    name = geometry.name;\r\n  }\r\n\r\n  //append any affix, usually to signify how the layer was created (e.g _buffer)\r\n  name = name + affix;\r\n\r\n  //check whether name is already in use, and try appending _1, _2, _3 etc until a name not in use is found\r\n  function isNameUnique(name, layers) {\r\n    if (layers.find(layer => layer.name === name) === undefined) {\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  var originalName = name;\r\n  var nameIsUnique = isNameUnique(name, state.layers);\r\n  var i = 1;\r\n  while (!nameIsUnique) {\r\n    name = originalName + \"_\" + i;\r\n    i += 1;\r\n\r\n    nameIsUnique = isNameUnique(name, state.layers);\r\n  }\r\n\r\n  return name;\r\n}\r\n\r\nexport function addLayer(state, layer, analysisType = \"new\") {\r\n  //Make a separate variable for display name in case we want to change it in the UI\r\n  layer.displayName = layer.name;\r\n\r\n  //Initialize color\r\n  layer.color = state.activeColor;\r\n\r\n  state = {\r\n    ...state,\r\n    layers: [layer, ...state.layers],\r\n    triggeredAnalyses: [...state.triggeredAnalyses, analysisType]\r\n  };\r\n  return state;\r\n}\r\n","import buffer from \"@turf/buffer\";\r\n\r\nconst createBuffer = (geom, value, units = \"meters\") => {\r\n  var buffered = buffer(geom, value, { units: units });\r\n  return buffered;\r\n};\r\n\r\nexport default createBuffer;\r\n","import intersect from \"@turf/intersect\";\r\n\r\nconst createIntersect = (geom1, geom2) => {\r\n  let intersects = {\r\n    type: \"FeatureCollection\",\r\n    features: []\r\n  };\r\n  console.log(geom1);\r\n  geom1.geometry.features.forEach(geom1 => {\r\n    geom2.geometry.features.forEach(geom2 => {\r\n      let intersectGeom = intersect(geom1, geom2);\r\n      if (intersectGeom !== null) {\r\n        intersects.features = [...intersects.features, intersectGeom];\r\n      }\r\n    });\r\n  });\r\n  return intersects;\r\n};\r\n\r\nexport default createIntersect;\r\n","import {\r\n  moveItemInArray,\r\n  updateItemByNameInLayers,\r\n  addLayer,\r\n  findUniqueName\r\n} from \"./reducerUtilities\";\r\nimport {\r\n  resolveBufferTrigger,\r\n  resolveIntersectionTrigger,\r\n  resolveDissolveTrigger\r\n} from \"./geometryAnalysis\";\r\n\r\nexport const analysisChosen = (state, action) => {\r\n  return {\r\n    ...state,\r\n    selectedAnalysis: action.payload,\r\n    triggeredAnalyses: [...state.triggeredAnalyses, action.payload]\r\n  };\r\n};\r\n\r\nexport const analysisTriggered = (state, action) => {\r\n  if (action.payload.type) {\r\n    switch (action.payload.type.toLowerCase()) {\r\n      case \"buffer\":\r\n        return resolveBufferTrigger(state, action);\r\n      case \"intersection\":\r\n        return resolveIntersectionTrigger(state, action);\r\n      case \"dissolve\":\r\n        return resolveDissolveTrigger(state, action);\r\n      default:\r\n        console.log(\"Selected analysis is invalid\");\r\n        return state;\r\n    }\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n\r\nexport const geometryCreateTriggered = (state, action) => {\r\n  let geometry = action.payload;\r\n  let name = findUniqueName(state, geometry);\r\n\r\n  var layer = {\r\n    geometry: geometry,\r\n    name: name,\r\n    type: \"point\"\r\n  };\r\n  return addLayer(state, layer);\r\n};\r\n\r\nexport const geometryDeleteStarted = (state, action) => {\r\n  const layerToDelete = state.layers.find(\r\n    layer => layer.name === action.payload\r\n  );\r\n  return {\r\n    ...state,\r\n    layersToDelete: [...state.layersToDelete, layerToDelete]\r\n  };\r\n};\r\n\r\nexport const geometryDeleteFinalized = (state, action) => {\r\n  return {\r\n    ...state,\r\n    layers: state.layers.filter(\r\n      layer => layer.name !== state.layersToDelete[0].name\r\n    ),\r\n    layersToDelete: []\r\n  };\r\n};\r\n\r\nexport const layerExpanded = (state, action) => {\r\n  let layerIndex = action.payload;\r\n  //Pane is already open, close it instead\r\n  if (state.expandedLayer === layerIndex) {\r\n    layerIndex = -1;\r\n  }\r\n  return {\r\n    ...state,\r\n    expandedLayer: layerIndex\r\n  };\r\n};\r\n\r\nexport const layerSelected = (state, action) => {\r\n  let layerName = action.payload;\r\n  let newSelectedLayers = Array.from(state.selectedLayers);\r\n  let index = newSelectedLayers.indexOf(layerName);\r\n\r\n  //If found remove, else add to selected layers\r\n  if (index >= 0) {\r\n    newSelectedLayers.splice(index, 1);\r\n  } else {\r\n    newSelectedLayers = [...newSelectedLayers, layerName];\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    selectedLayers: newSelectedLayers\r\n  };\r\n};\r\n\r\nexport const layersRearranged = (state, action) => {\r\n  const { destination, source } = action.payload;\r\n  const newLayers = moveItemInArray(\r\n    state.layers,\r\n    source.index,\r\n    destination.index\r\n  );\r\n\r\n  //Update reference to expanded layer\r\n  var expandedLayer = state.expandedLayer;\r\n  if (source.index === expandedLayer) {\r\n    expandedLayer = destination.index;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    layers: newLayers,\r\n    expandedLayer: expandedLayer,\r\n    layerToMove: destination.index\r\n  };\r\n};\r\n\r\nexport const layersRearrangedDone = (state, action) => {\r\n  return {\r\n    ...state,\r\n    layerToMove: -1\r\n  };\r\n};\r\n\r\nexport const colorChange = (state, action) => {\r\n  const changeLayerColor = (layer, args) => {\r\n    let color = args[0];\r\n    let newLayer = {\r\n      ...layer,\r\n      color: color\r\n    };\r\n    return newLayer;\r\n  };\r\n  //Create a new layers array that is the same except for one color change to selected layer\r\n  let newColor = action.payload;\r\n  let newLayers = updateItemByNameInLayers(\r\n    state.layers,\r\n    state.selectedLayers,\r\n    changeLayerColor,\r\n    newColor\r\n  );\r\n  let newState = Array.from(state);\r\n\r\n  newState = {\r\n    ...state,\r\n    layers: newLayers,\r\n    activeColor: newColor\r\n  };\r\n\r\n  return newState;\r\n};\r\n","import {\r\n  analysisChosen,\r\n  analysisTriggered,\r\n  geometryCreateTriggered,\r\n  layerExpanded,\r\n  layerSelected,\r\n  colorChange,\r\n  geometryDeleteStarted,\r\n  geometryDeleteFinalized,\r\n  layersRearranged,\r\n  layersRearrangedDone\r\n} from \"./geometryCaseReducers\";\r\nimport { createReducer } from \"./reducerUtilities\";\r\n\r\nexport const initialGeometryState = {\r\n  selectedAnalysis: \"buffer\",\r\n  triggeredAnalyses: [],\r\n  expandedLayer: -1,\r\n  selectedLayers: [],\r\n  layers: [],\r\n  layersToDelete: [],\r\n  layerToMove: -1,\r\n  activeColor: \"#001eff\"\r\n};\r\n\r\nexport const geometryReducer = createReducer(initialGeometryState, {\r\n  ANALYSIS_CHOSEN: analysisChosen,\r\n  ANALYSIS_TRIGGERED: analysisTriggered,\r\n  GEOMETRY_CREATE_TRIGGERED: geometryCreateTriggered,\r\n  GEOMETRY_DELETE_STARTED: geometryDeleteStarted,\r\n  GEOMETRY_DELETE_FINALIZED: geometryDeleteFinalized,\r\n  LAYER_EXPANDED: layerExpanded,\r\n  LAYER_SELECTED: layerSelected,\r\n  DATA_LIST_REARRANGED: layersRearranged,\r\n  LAYERS_REARRANGED_DONE: layersRearrangedDone,\r\n  COLOR_CHANGE: colorChange,\r\n})","import { findUniqueName, addLayer } from \"./reducerUtilities\";\r\nimport createBuffer from \"../components/analysis/buffer\";\r\nimport createIntersect from \"../components/analysis/intersection\";\r\n\r\nexport function resolveBufferTrigger(state, action) {\r\n  var value = action.payload.value;\r\n  state.selectedLayers.forEach(selectedLayerName => {\r\n    let selectedLayer = state.layers.find(\r\n      element => element.name === selectedLayerName\r\n    );\r\n    let index = state.layers.indexOf(selectedLayer);\r\n    let geom = state.layers[index].geometry;\r\n    let bufferGeom = createBuffer(geom, value);\r\n    let name = state.layers[index].name;\r\n    name = findUniqueName(state, geom, name, \"_buffer\");\r\n    let layer = {\r\n      geometry: bufferGeom,\r\n      name: name,\r\n      type: \"polygon\"\r\n    };\r\n    state = addLayer(state, layer, \"buffer\");\r\n  });\r\n\r\n  return state;\r\n}\r\n\r\nexport function resolveIntersectionTrigger(state, action) {\r\n  if (state.selectedLayers.length !== 2) {\r\n    alert(\"Select two layers to do an intersection\");\r\n    return state;\r\n  }\r\n\r\n  let selectedLayer1 = state.layers.find(\r\n    element => element.name === state.selectedLayers[0]\r\n  );\r\n  let index1 = state.layers.indexOf(selectedLayer1);\r\n  let geom1 = state.layers[index1];\r\n\r\n  let selectedLayer2 = state.layers.find(\r\n    element => element.name === state.selectedLayers[1]\r\n  );\r\n  let index2 = state.layers.indexOf(selectedLayer2);\r\n  let geom2 = state.layers[index2];\r\n\r\n  if (!(geom1.type === \"polygon\" && geom2.type === \"polygon\")) {\r\n    alert(\"Both layers selected must be polygons\");\r\n    return state;\r\n  }\r\n\r\n  let intersectGeom = createIntersect(geom1, geom2);\r\n  let name =\r\n    state.layers[index1].name.substring(0, 5) +\r\n    \"_\" +\r\n    state.layers[index2].name.substring(0, 5);\r\n  name = findUniqueName(state, geom1, name, \"_intersect\");\r\n  let layer = {\r\n    geometry: intersectGeom,\r\n    name: name,\r\n    type: \"polygon\" //TODO handle line and point overlap\r\n  };\r\n\r\n  state = addLayer(state, layer, \"intersect\");\r\n\r\n  return state;\r\n}\r\n\r\nexport function resolveDissolveTrigger(state, action) {\r\n  alert(\"Dissolve not implemented\");\r\n  return state;\r\n}\r\n","\r\nconst initialState = {\r\n    result: 1,\r\n    lastValues: []\r\n  };\r\n  \r\n export const fileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n      case \"FILES_UPLOADED\":\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return state;\r\n  };","import { combineReducers } from \"redux\";\r\nimport { geometryReducer } from \"./geometryReducer\";\r\nimport { fileReducer } from \"./fileReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  geometry: geometryReducer,\r\n  file: fileReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import rootReducer from \"../reducers/reducer\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport logger from \"redux-logger\";\r\n\r\nconst store = createStore(rootReducer, {}, applyMiddleware(logger));\r\n\r\nexport default store;\r\n","import { bindActionCreators } from \"redux\";\r\n\r\nimport store from \"../store/store\";\r\n\r\nconst doAdditionToCount = amount => ({ type: \"ADD\", payload: amount });\r\nconst doSubtractionToCount = amount => ({ type: \"SUBTRACT\", payload: amount });\r\n\r\nexport const mathActions = bindActionCreators(\r\n  {\r\n    add: doAdditionToCount,\r\n    subtract: doSubtractionToCount\r\n  },\r\n  store.dispatch\r\n);\r\n\r\nexport const analysisChoosen = analysisName => ({\r\n  type: \"ANLYSIS_CHOOSEN\",\r\n  payload: analysisName\r\n});\r\nexport const analysisTriggered = analysis => ({\r\n  type: \"ANALYSIS_TRIGGERED\",\r\n  payload: analysis\r\n});\r\n\r\nexport const analysisActions = bindActionCreators(\r\n  {\r\n    analysisChoosen,\r\n    analysisTriggered\r\n  },\r\n  store.dispatch\r\n);\r\n\r\nexport const geometryCreateNew = geometry => ({\r\n  type: \"GEOMETRY_CREATE_TRIGGERED\",\r\n  payload: geometry\r\n});\r\nexport const geometryStartDeletion = name => ({\r\n  type: \"GEOMETRY_DELETE_STARTED\",\r\n  payload: name\r\n});\r\n\r\nexport const geomatryFinalizeDeletion = () => ({\r\n  type: \"GEOMETRY_DELETE_FINALIZED\"\r\n});\r\n\r\nexport const expandLayer = index => ({\r\n  type: \"LAYER_EXPANDED\",\r\n  payload: index\r\n});\r\n\r\nexport const selectLayer = name => ({\r\n  type: \"LAYER_SELECTED\",\r\n  payload: name\r\n});\r\n\r\n\r\nexport const selectColor = hex => ({\r\n  type: \"COLOR_CHANGE\",\r\n  payload: hex\r\n});\r\n\r\nexport const dataLayerDragEnd = result => ({\r\n  type: \"DATA_LIST_REARRANGED\",\r\n  payload: result\r\n});\r\n\r\nexport const geometryActions = bindActionCreators(\r\n  {\r\n    geometryCreateNew,\r\n    geometryStartDeletion,\r\n    geomatryFinalizeDeletion,\r\n    expandLayer,\r\n    selectLayer,\r\n    selectColor,\r\n    dataLayerDragEnd\r\n  },\r\n  store.dispatch\r\n);\r\n\r\nexport const fileUploaded = files => ({\r\n  type: \"GEOMETRY_CREATE_TRIGGERED\",\r\n  payload: JSON.parse(files)\r\n});\r\n\r\nexport const fileActions = bindActionCreators(\r\n  {\r\n    fileUploaded\r\n  },\r\n  store.dispatch\r\n);\r\n","import React from \"react\";\r\n// Import the useDropzone hooks from react-dropzone\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { connect } from \"react-redux\";\r\nimport { fileUploaded } from \"../../action-creators/actionCreator\";\r\n\r\n\r\n\r\nconst FileUpload = ({ fileUploaded, accept }) => {\r\n  const onDrop = files => {\r\n    if (files && files[0]) {\r\n      let reader = new FileReader();\r\n      let file = files[0];\r\n  \r\n      reader.onloadend = () => {\r\n        fileUploaded(reader.result);\r\n      };\r\n      reader.readAsText(file);\r\n    }\r\n  };\r\n  \r\n  // Initializing useDropzone hooks with options\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept\r\n  });\r\n\r\n  /* \r\n    useDropzone hooks exposes two functions called getRootProps and getInputProps\r\n    and also exposes isDragActive boolean\r\n  */\r\n\r\n  return (\r\n    <div {...getRootProps()}>\r\n      <input className=\"dropzone-input\" {...getInputProps()} />\r\n      <div className=\"text-center\">\r\n        {isDragActive ? (\r\n          <p className=\"dropzone-content\">Release to drop the files here</p>\r\n        ) : (\r\n          <p className=\"dropzone-content\">\r\n            Drag 'n' drop some files here, or click to select files\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst actions = {\r\n  fileUploaded: fileUploaded\r\n};\r\n\r\nexport default connect(null, actions)(FileUpload);\r\n","import React from \"react\";\r\nimport {\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  CardActions,\r\n  Button\r\n} from \"@material-ui/core\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport FileUpload from \"./FileUpload\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  details: {\r\n    display: \"block\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n}));\r\n\r\nconst NewFileMenu = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography className={classes.heading}>Add data</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails className={classes.details}>\r\n          <FileUpload accept={\"application/json\"}/>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewFileMenu;\r\n","import React from \"react\";\r\nimport {\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  CardActions,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel\r\n} from \"@material-ui/core\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  details: {\r\n    display: \"block\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n}));\r\n\r\nconst DataLayerPanel = ({\r\n  name,\r\n  index,\r\n  geometryStartDeletion,\r\n  expandLayer,\r\n  selectLayer,\r\n  expandedLayer\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Draggable draggableId={name} index={index}>\r\n      {provided => (\r\n        <ExpansionPanel\r\n          {...provided.draggableProps}\r\n          {...provided.dragHandleProps}\r\n          innerRef={provided.innerRef}\r\n          expanded={index === expandedLayer}\r\n          onChange={() => expandLayer(index)}\r\n        >\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n            <FormControlLabel\r\n              aria-label=\"Select\"\r\n              onClick={event => {\r\n                //Filter out the double onclick when clicking on the text\r\n                if (event.target.type === \"checkbox\") {\r\n                  selectLayer(name);\r\n                }\r\n                //Want to stop expansion effect, just select\r\n                event.stopPropagation();\r\n              }}\r\n              onFocus={event => {\r\n                event.stopPropagation();\r\n              }}\r\n              control={<Checkbox />}\r\n              label={name}\r\n            />\r\n            {/* <Typography className={classes.heading}>{name}</Typography> */}\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <CardActions className={classes.actions}>\r\n              <Button size=\"small\">Details</Button>\r\n              <Button size=\"small\">Edit</Button>\r\n              <Button size=\"small\" onClick={() => geometryStartDeletion(name)}>\r\n                Delete\r\n              </Button>\r\n            </CardActions>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      )}\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nexport default DataLayerPanel;\r\n","import React from \"react\";\r\nimport {\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  CardActions,\r\n  Button,\r\n  List\r\n} from \"@material-ui/core\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { connect } from \"react-redux\";\r\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\r\nimport DataLayerPanel from \"./DataLayerPanel\";\r\n\r\nimport {\r\n  geometryStartDeletion,\r\n  expandLayer,\r\n  dataLayerDragEnd,\r\n  selectLayer\r\n} from \"../../action-creators/actionCreator\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  details: {\r\n    display: \"block\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n}));\r\n\r\nconst DatasetMenu = ({\r\n  expandedLayer,\r\n  layers,\r\n  geometryStartDeletion,\r\n  expandLayer,\r\n  selectLayer,\r\n  dataLayerDragEnd\r\n}) => {\r\n  const classes = useStyles();\r\n  \r\n  const onDragEnd = result => {\r\n    const { destination, source } = result;\r\n    //dropped outside of context or otherwise no destination\r\n    if (!destination) {\r\n      return;\r\n    }\r\n    //not moved\r\n    if (\r\n      destination.droppableId === source.droppableId &&\r\n      destination.index === source.index\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    dataLayerDragEnd(result);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography className={classes.heading}>Datasets</Typography>\r\n        </ExpansionPanelSummary>\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          {/* Everything that is shown on the open panel, but not the closed */}\r\n          <ExpansionPanelDetails className={classes.details}>\r\n            <List>\r\n              <Droppable droppableId=\"datasetMenu\">\r\n                {provided => (\r\n                  <div\r\n                    ref={provided.innerRef}\r\n                    {...provided.droppableProps}\r\n                    provided={provided}\r\n                  >\r\n                    {layers.map((layer, index) => (\r\n                      <DataLayerPanel\r\n                        className=\"layer\"\r\n                        key={layer.name}\r\n                        name={layer.name}\r\n                        index={index}\r\n                        geometryStartDeletion={geometryStartDeletion}\r\n                        expandLayer={expandLayer}\r\n                        selectLayer={selectLayer}\r\n                        expandedLayer={expandedLayer}\r\n                      ></DataLayerPanel>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </List>\r\n          </ExpansionPanelDetails>\r\n        </DragDropContext>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst select = appState => ({\r\n  expandedLayer: appState.geometry.expandedLayer,\r\n  layers: appState.geometry.layers\r\n});\r\n\r\nconst actions = {\r\n  geometryStartDeletion: geometryStartDeletion,\r\n  expandLayer: expandLayer,\r\n  selectLayer: selectLayer,\r\n  dataLayerDragEnd: dataLayerDragEnd\r\n};\r\n\r\nexport default connect(select, actions)(DatasetMenu);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AdjustIcon from \"@material-ui/icons/Adjust\";\r\nimport {\r\n  TextField,\r\n  Dialog,\r\n  DialogTitle,\r\n  ListItemText,\r\n  ListItem,\r\n  ListItemIcon,\r\n  Button\r\n} from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  form: {\r\n    \"& > *\": {\r\n      margin: theme.spacing(1),\r\n      width: 200\r\n    }\r\n  }\r\n}));\r\n\r\nfunction SimpleDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, selectedValue, open } = props;\r\n\r\n  const handleClick = value => {\r\n    onClose(value);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  let [inputValue, setInputValue] = React.useState(50);\r\n\r\n  return (\r\n    <Dialog\r\n      onClose={handleClose}\r\n      aria-labelledby=\"simple-dialog-title\"\r\n      open={open}\r\n    >\r\n      <DialogTitle id=\"simple-dialog-title\">Set size of buffer</DialogTitle>\r\n      <form className={classes.form} noValidate autoComplete=\"off\">\r\n        <TextField\r\n          id=\"outlined-basic\"\r\n          label=\"meters\"\r\n          variant=\"outlined\"\r\n          type=\"number\"\r\n          onChange={event => setInputValue(event.target.value)}\r\n        />\r\n      </form>\r\n      <Button onClick={() => (handleClick(inputValue))}>Done</Button>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst BufferDialog = ({ analysisTriggered }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = value => {\r\n    setOpen(false);\r\n    analysisTriggered({ type: \"buffer\", value: value });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ListItem button onClick={handleClickOpen}>\r\n        <ListItemIcon>\r\n          <AdjustIcon />\r\n        </ListItemIcon>\r\n        <ListItemText\r\n          primary=\"Buffer\"\r\n          secondary=\"Create polygon of all within X meters\"\r\n        />\r\n      </ListItem>\r\n      <SimpleDialog\r\n        open={open}\r\n        onClose={handleClose}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default BufferDialog;\r\n","import React from \"react\";\r\nimport {\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails,\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText\r\n} from \"@material-ui/core\";\r\nimport CropIcon from \"@material-ui/icons/Crop\";\r\nimport DraftsIcon from \"@material-ui/icons/Drafts\";\r\n\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { analysisTriggered } from \"../../action-creators/actionCreator\";\r\nimport { connect } from \"react-redux\";\r\nimport BufferDialog from \"./BufferDialog\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  details: {\r\n    display: \"block\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n}));\r\n\r\nconst AnalysisMenu = ({ analysisTriggered }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography className={classes.heading}>Analysis</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails className={classes.details}>\r\n          <List dense={true} component=\"nav\" aria-label=\"main mailbox folders\">\r\n            <BufferDialog analysisTriggered={analysisTriggered}></BufferDialog>\r\n            <ListItem\r\n              button\r\n              onClick={() => analysisTriggered({ type: \"intersection\" })}\r\n            >\r\n              <ListItemIcon>\r\n                <CropIcon />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Intersection\"\r\n                secondary=\"Find the overlap between two polygons\"\r\n              />\r\n            </ListItem>\r\n            <ListItem button>\r\n              <ListItemIcon>\r\n                <DraftsIcon />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Dissolve\"\r\n                secondary=\"Combine polygons overlapping themselves\"\r\n              />\r\n            </ListItem>\r\n          </List>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n};\r\n\r\n// const select = appState => {\r\n//   return {};\r\n// };\r\nconst actions = {\r\n  analysisTriggered: analysisTriggered\r\n};\r\n\r\nexport default connect(null, actions)(AnalysisMenu);\r\n","import React from \"react\";\r\nimport { CustomPicker, AlphaPicker } from \"react-color\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  alphaDiv: {\r\n    width: \"100%\",\r\n    margin: \"auto\",\r\n    position: \"relative\",\r\n    marginTop: \"20px\"\r\n  },\r\n  alpha: {\r\n    position: \"relative\"\r\n  }\r\n}));\r\nconst MyAlphaPicker = ({ color, onChange, ...props }) => {\r\n  const classes = useStyles();\r\n\r\n  return <AlphaPicker {...props} className={classes.alphaDiv} />;\r\n};\r\n\r\nexport default CustomPicker(MyAlphaPicker);\r\n","import React from \"react\";\r\nimport { SliderPicker } from \"react-color\";\r\nimport { selectColor } from \"../../action-creators/actionCreator\";\r\nimport { connect } from \"react-redux\";\r\nimport AlphaPicker from \"./AlphaPicker\";\r\n\r\nconst SliderColorPicker = ({ activeColor, selectColor }) => {\r\n  return (\r\n    <div>\r\n      <SliderPicker\r\n        color={activeColor}\r\n        onChangeComplete={color => selectColor(color.hex)}\r\n      />\r\n      <AlphaPicker\r\n        color={activeColor}\r\n        onChange={color => selectColor(color.hex)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst select = appState => {\r\n  return {\r\n    activeColor: appState.geometry.activeColor\r\n  };\r\n};\r\n\r\nconst actions = {\r\n  selectColor: selectColor\r\n};\r\n\r\nexport default connect(select, actions)(SliderColorPicker);\r\n","import React from \"react\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport SliderColorPicker from \"./SliderColorPicker\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n    width: \"90%\",\r\n    margin: \"auto\",\r\n    backgroundColor: \"#e8e8e8\"\r\n  }\r\n}));\r\n\r\nconst ColorPicker = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <SliderColorPicker />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ColorPicker;\r\n","import React from \"react\";\r\nimport {\r\n  ExpansionPanel,\r\n  ExpansionPanelSummary,\r\n  ExpansionPanelDetails\r\n} from \"@material-ui/core\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ColorPicker from \"./ColorPicker\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\"\r\n  },\r\n  details: {\r\n    display: \"block\"\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n}));\r\n\r\nconst ColorMenu = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography className={classes.heading}>Color/Visibility</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails className={classes.details}>\r\n          <ColorPicker />\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ColorMenu;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {\r\n  analysisChoosen,\r\n  geometryCreateNew,\r\n  analysisTriggered\r\n} from \"../../action-creators/actionCreator\";\r\nimport NewFileMenu from \"./NewFileMenu\";\r\nimport DatasetMenu from \"./DatasetMenu\";\r\nimport AnalysisMenu from \"./AnalysisMenu\";\r\nimport ColorMenu from \"./ColorMenu\";\r\nimport schools from \"../../data/videregaaende.json\";\r\n\r\nconst Sidebar = ({\r\n  className,\r\n  analysisChoosen,\r\n  geometryCreateNew,\r\n  analysisTriggered\r\n}) => {\r\n  return (\r\n    <div className={className}>\r\n      <Button onClick={() => analysisChoosen(\"Buffer\")}>Choose buffer</Button>\r\n      <Button onClick={() => geometryCreateNew(schools)}>\r\n        Create geometry\r\n      </Button>\r\n      <Button onClick={() => analysisTriggered(200)}>Trigger</Button>\r\n      <NewFileMenu />\r\n      <DatasetMenu />\r\n      <AnalysisMenu />\r\n      <ColorMenu />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styledSidebar = styled(Sidebar)`\r\n  grid-column: 1;\r\n  grid-row-start: 2;\r\n  grid-row-end: 3;\r\n  background-color: #4e3a4c;\r\n  overflow: auto;\r\n`;\r\n\r\nconst select = appState => {\r\n  return {\r\n    currentAnalysis: appState.currentAnalysis\r\n  };\r\n};\r\nconst actions = {\r\n  analysisChoosen: analysisChoosen,\r\n  geometryCreateNew: geometryCreateNew,\r\n  analysisTriggered: analysisTriggered\r\n};\r\n\r\nexport default connect(select, actions)(styledSidebar);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledText = styled.h1`\r\n  // text-color: #4e3a40;\r\n`;\r\n\r\nconst Navbar = ({ className }) => {\r\n  return (\r\n    <div className={className}>\r\n      <StyledText>Hello world</StyledText>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styledNavbar = styled(Navbar)`\r\n  grid-column-start: 1;\r\n  grid-column-end: 4;\r\n  grid-row-start: 1;\r\n  grid-row-end: 1;\r\n  background-color: #4e3a4c;\r\n`;\r\n\r\nexport default styledNavbar;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { connect } from \"react-redux\";\r\nimport { geomatryFinalizeDeletion } from \"../action-creators/actionCreator\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoidG9vbGF0ZSIsImEiOiJjamNraXM3cWMwdHJ4MnFwZ2tuOXdlM29tIn0.YCpu-_2IAVCvVJEEit8WGQ\";\r\n\r\nclass Map extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: props.location.lng,\r\n      lat: props.location.lat,\r\n      zoom: props.location.zoom,\r\n      activeLayers: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { lng, lat, zoom } = this.state;\r\n    this._map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: \"mapbox://styles/mapbox/streets-v9\",\r\n      center: [lng, lat],\r\n      zoom\r\n    });\r\n    var map = this._map;\r\n    map.on(\"move\", () => {\r\n      const { lng, lat } = map.getCenter();\r\n      this.setState({\r\n        lng: lng.toFixed(4),\r\n        lat: lat.toFixed(4),\r\n        zoom: map.getZoom().toFixed(2)\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    var newProps = this.props;\r\n    var newLayers = newProps.layers;\r\n    var prevLayers = prevProps.layers;\r\n\r\n    //new layer, add it\r\n    if (newLayers.length > prevLayers.length) {\r\n      let layer = newLayers[0];\r\n      switch (layer.type) {\r\n        case \"point\":\r\n          this.addPointLayer(layer);\r\n          break;\r\n        case \"polygon\":\r\n          this.addPolygonLayer(layer);\r\n          break;\r\n        default:\r\n          console.log(\"invalid layer type\");\r\n          break;\r\n      }\r\n    }\r\n    //No new layers, can compare new and old props\r\n    else {\r\n      if(newProps.activeColor !== prevProps.activeColor){\r\n        newProps.selectedLayers.forEach(selectedLayerName => {\r\n          let selectedLayer = newProps.layers.find(layer => layer.name === selectedLayerName);\r\n          this.setColorOfLayer(selectedLayer);\r\n        });\r\n        \r\n      }\r\n\r\n    }\r\n\r\n    //Delete layers marked for deletion\r\n    if (newProps.layersToDelete.length > 0) {\r\n      newProps.layersToDelete.forEach(layer => this.removeMapLayer(layer));\r\n    }\r\n\r\n    if (newProps.layerToMove >= 0) {\r\n      this.updateLayerOrder(newProps.layerToMove);\r\n    }\r\n  }\r\n\r\n  addPointLayer(layer) {\r\n    let newLayer = this._map.addLayer({\r\n      id: layer.name,\r\n      type: \"circle\",\r\n      source: {\r\n        type: \"geojson\",\r\n        data: layer.geometry\r\n      },\r\n      paint: { \"circle-color\": layer.color }\r\n    });\r\n\r\n    this.setState({\r\n      activeLayers: [...this.state.activeLayers, newLayer]\r\n    });\r\n  }\r\n\r\n  addPolygonLayer(layer) {\r\n    var newLayer = this._map.addLayer({\r\n      id: layer.name,\r\n      type: \"fill\",\r\n      source: {\r\n        type: \"geojson\",\r\n        data: layer.geometry\r\n      },\r\n      // layout: {\r\n      //   \"fill-color\": \"#00ff00\",\r\n      //   \"fill-opacity\": 0.2\r\n      // },\r\n      paint: { \"fill-color\": layer.color }\r\n    });\r\n\r\n    this.setState({\r\n      activeLayers: [...this.state.activeLayers, newLayer]\r\n    });\r\n  }\r\n\r\n  removeMapLayer(layerToDelete) {\r\n    //check whether delete list is stale\r\n    if (!this._map.getSource(layerToDelete.name)) {\r\n      return;\r\n    }\r\n\r\n    this._map.removeLayer(layerToDelete.name);\r\n    this._map.removeSource(layerToDelete.name);\r\n    this.props.delete_finalize();\r\n  }\r\n\r\n  setColorOfLayer(layer) {\r\n    let colorVariable = \"\";\r\n    if (layer.type === \"point\") {\r\n      colorVariable = \"circle-color\";\r\n    } else if (layer.type === \"polygon\") {\r\n      colorVariable = \"fill-color\";\r\n    }\r\n\r\n    this._map.setPaintProperty(layer.name, colorVariable, layer.color);\r\n  }\r\n\r\n  updateLayerOrder(index) {\r\n    let layers = this.props.layers;\r\n    let layerToUpdateId = layers[index].name;\r\n    let layerBeforeId;\r\n    //If moved to the top of the list, don't draw it behind anything\r\n    if (index === 0) {\r\n      layerBeforeId = null;\r\n    }\r\n    //Else, move it to the spot behind the entry above it in the list\r\n    else {\r\n      layerBeforeId = layers[index - 1].name;\r\n    }\r\n    this._map.moveLayer(layerToUpdateId, layerBeforeId);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={this.props.className}\r\n        ref={el => (this.mapContainer = el)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst StyledMap = styled(Map)`\r\n  grid-column-start: 2;\r\n  grid-column-end: 4;\r\n  grid-row-start: 2;\r\n  grid-row-end: 4;\r\n`;\r\n\r\nconst select = appState => {\r\n  return {\r\n    selectedLayers: appState.geometry.selectedLayers,\r\n    layers: appState.geometry.layers,\r\n    layersToDelete: appState.geometry.layersToDelete,\r\n    layerToMove: appState.geometry.layerToMove,\r\n    activeColor: appState.geometry.activeColor\r\n  };\r\n};\r\n\r\nconst actions = {\r\n  delete_finalize: geomatryFinalizeDeletion\r\n};\r\n\r\nexport default connect(select, actions)(StyledMap);\r\n","import React, { Component } from \"react\";\r\n\r\nimport AppLayout from \"./components/AppLayout\";\r\nimport Sidebar from \"./components/menu/Sidebar\";\r\nimport Navbar from \"./components/menu/Navbar\";\r\nimport Map from \"./components/Map\";\r\nimport locations from \"./data/locations.json\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <AppLayout>\r\n          <Navbar />\r\n          <Sidebar />\r\n          <Map location={locations.oslo} />\r\n        </AppLayout>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store/store\";\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}